## 데이터 단위와 캡슐화

**데이터 단위**(Data Unit)는 네트워크에서 각 계층이 처리하는 데이터의 단위이다. 각 계층마다 다른 이름과 구조로 표현된다.

<br>

**캡슐화**(Encapsulation)는 상위 계층 데이터를 하위 계층 데이터 단위에 포함시키는 과정이다. 계층마다 **헤더**(Header)와 필요 시 **트레일러**(Trailer)를 추가한다.

<br>

### 1. 계층별 데이터 단위

| 계층                            | 데이터 단위                                        | 설명                          |
| ------------------------------- | -------------------------------------------------- | ----------------------------- |
| **응용 계층**(Application)      | 데이터(Data)                                       | 사용자가 생성한 정보          |
| **전송 계층**(Transport)        | 세그먼트(Segment, TCP) / 데이터그램(Datagram, UDP) | 신뢰성/비연결 전송 단위       |
| **네트워크 계층**(Network)      | 패킷(Packet)                                       | 목적지 주소 포함, 라우팅 단위 |
| **데이터 링크 계층**(Data Link) | 프레임(Frame)                                      | MAC 주소, 오류 검출 정보 포함 |
| **물리 계층**(Physical)         | 비트(Bit)                                          | 실제 전송 신호 단위           |

<br>

### 2. 캡슐화 과정

**송신 측 데이터 흐름**

```
응용 계층 → 데이터(Data)
       ▼
전송 계층 → 헤더(포트 번호, 오류 제어) + 데이터 → 세그먼트(Segment)/데이터그램(Datagram)
       ▼
네트워크 계층 → 헤더(IP 주소) + 세그먼트 → 패킷(Packet)
       ▼
데이터 링크 계층 → 헤더(MAC 주소) + 패킷 + 트레일러(오류 검출 코드) → 프레임(Frame)
       ▼
물리 계층 → 비트(Bit) 전송
```

<img src="https://raw.githubusercontent.com/Team-Gravit/gravit-images/main/network/unit04/image1.png" width="100%">

<br><br>

### 3. 역캡슐화 과정

**수신 측 데이터 흐름**

```
물리 계층 → 비트(Bit)
       ▼
데이터 링크 계층 → 프레임(Frame) → 헤더 및 트레일러 제거 → 패킷 복원
       ▼
네트워크 계층 → 패킷(Packet) → 헤더 제거 → 세그먼트 복원
       ▼
전송 계층 → 세그먼트(Segment)/데이터그램(Datagram) → 헤더 제거 → 데이터 복원
       ▼
응용 계층 → 데이터(Data) 복원
```

<img src="https://raw.githubusercontent.com/Team-Gravit/gravit-images/main/network/unit04/image2.png" width="100%">

<br><br>

### 4. 캡슐화의 장점

- **계층 독립성**: 각 계층이 서로 영향을 받지 않고 독립적으로 동작함
- **신뢰성 있는 전송**: 오류 검출과 복구가 가능해 안정적인 데이터 전송이 가능함
- **데이터 흐름 명확화**: 데이터 처리 과정과 출발지·목적지가 명확함
- **표준화 및 호환성**: 계층별 역할과 인터페이스가 표준화되어 호환성을 유지함
- **확장 및 유지보수 용이**: 계층 단위로 기능 추가·수정이 가능해 유지보수가 편리함
