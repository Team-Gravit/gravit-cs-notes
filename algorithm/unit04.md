## 백트래킹

**백트래킹**은 **현재 상태에서 가능한 모든 후보군을 탐색**하되, **조건을 만족하지 않으면 되돌아가는** 문제 해결 전략이다. 모든 경우의 수를 탐색하되 해답이 아닌 경로를 가지치기하여 탐색 효율을 높인다. **재귀적 구조**로 구현되며, 주로 **DFS**와 함께 사용된다.

<br>

### 1. 백트래킹의 특징

- **재귀적 구조**로 문제를 해결하며 현재 상태가 제한 조건을 위배하는지 판단하고, 위배되는 경우 **가지치기**를 통해 해당 경로를 제거함
- 모든 경우의 수에서 조건을 만족하는 경우를 탐색하기 때문에, **DFS**와 **BFS**가 구현에 적합
- 조건에 부합하지 않으면 이전 상태로 돌아가야 하기 때문에, DFS 구현이 더 적합
- **상태 공간 트리**(State Space Tree)로 표현 가능

<br>

### 2. 백트래킹 과정

**1단계 - 탐색 시작**
시작 노드부터 탐색을 시작한다.

<br>

**2단계 - 조건 만족 여부 판단(유망성 검사)**

현재 상태가 조건을 만족하는지 확인한다.

<br>

**3단계 - 가지치기**

조건을 만족하지 않으면 해당 경로를 포기하고 이전 상태로 돌아간다. 조건을 만족하면 해당 경로로 깊게 탐색한다.

<br>

**4단계 - 정답 도출**

조건을 만족하는 경우 결과를 저장하고, 다른 경우의 수를 계속 탐색한다.

<br>

### 3. 백트래킹 예시

**3X3 행렬 선택 게임**

> 규칙: 아래 행렬에서 3개의 숫자를 선택해야 한다. 단, 선택한 숫자들의 행과 열은 중복되면 안 된다.

<img src="https://raw.githubusercontent.com/Team-Gravit/gravit-images/main/algorithm/unit04/image1.png" width="100%">

행과 열이 중복되지 않는 원소 3개를 선택하려면, **모든 행과 열에 선택된 원소가 하나씩 존재**해야 한다.

따라서 첫 번째 행 [1, 2, 3]을 기준으로 생각하면 다음 세가지 경우가 존재한다.

<br>

**원소 1을 고르는 경우**

<img src="https://raw.githubusercontent.com/Team-Gravit/gravit-images/main/algorithm/unit04/image2.png" width="100%">

원소 1을 선택한 경우의 상태 공간 트리이다. 첫 번째 행에서 1을 선택하면, 두 번째 행에서는 첫 번째 열을 제외한 5와 8만 선택 가능하다.

<br>

**원소 2를 고르는 경우**

<img src="https://raw.githubusercontent.com/Team-Gravit/gravit-images/main/algorithm/unit04/image3.png" width="100%">

원소 2를 선택한 경우의 상태 공간 트리이다. 첫 번째 행에서 2를 선택하면, 두 번째 행에서는 두 번째 열을 제외한 4와 6만 선택 가능하다.

<br>

**원소 3을 고르는 경우**

<img src="https://raw.githubusercontent.com/Team-Gravit/gravit-images/main/algorithm/unit04/image4.png" width="100%">

원소 3을 선택한 경우의 상태 공간 트리이다. 첫 번째 행에서 3을 선택하면, 두 번째 행에서는 세 번째 열을 제외한 4와 5만 선택 가능하다.

<br>

### 5. 시간 복잡도

백트래킹에서의 시간 복잡도는 문제의 크기와 가지치기의 효과에 따라 달라진다.

<br>

### 6-1. 백트래킹의 장점

- 유망하지 않은 경로를 제거하여 탐색량 감소
- 모든 경우를 고려하므로 최적해를 보장(완전 탐색)

<br>

### 6-2. 백트래킹의 단점

- 가지치기가 실패하면 브루트포스처럼 동작하여 비효율적
- 최악의 경우 **지수 시간 복잡도 (O(N!), O(2^N))**

<br>

### 7. DFS와 백트래킹 비교

| **특징**      | **DFS**        | **백트래킹**                |
| ------------- | -------------- | --------------------------- |
| **탐색 방식** | 모든 경로 탐색 | 조건을 만족하는 경로만 탐색 |
| **가지치기**  | 없음           | 유망하지 않은 노드 제거     |
| **효율성**    | 낮음           | 상대적으로 높음             |
| **사용 목적** | 그래프 탐색    | 조건 만족 문제 해결         |

<br>

### 8. 대표적인 백트래킹 문제

- **N-Queen 문제**: N×N 체스판에 N개의 퀸을 서로 공격하지 않게 배치
- **순열/조합**: n개 중 r개를 선택하는 모든 경우의 수
- **스도쿠**: 9×9 칸에 1~9까지 숫자를 규칙에 맞게 채우기
- **미로 탐색**: 모든 가능한 경로를 탐색하여 출구 찾기
- **부분집합 합**: 특정 합을 만드는 부분집합 찾기

<br>

> 💡 백트래킹은 가지치기를 통해 **불필요한 탐색을 줄이는 것**이 핵심이다. 조건을 잘 설정할수록 효율이 높아지며, N-Queen, 스도쿠 등 제약 조건이 명확한 문제에 효과적이다.
