## 최소 신장 트리(MST, Minimum Spanning Tree)

**신장 트리** 중에서 간선들의 **가중치 합이 최소**인 트리. 네트워크의 모든 정점을 **최소 비용**으로 연결한다.

<img src="image1.png" width="100%">

<br>

### 1. 신장 트리(Spanning Tree)

그래프 내의 **모든 정점을 포함**하는 트리. 그래프의 **최소 연결 부분 그래프**이다.

- **n개의 정점**을 가지는 그래프는 **(n-1)개의 간선**으로 연결됨
- **(n-1)개의 간선**으로 연결된 그래프는 필연적으로 **트리 형태**가 됨
- **사이클을 포함하지 않음**

<br>

**활용 사례**

- 회사 내 모든 전화기를 최소 케이블로 연결
- n개 위치를 연결하는 통신 네트워크를 최소 링크로 구축

<br>

### 2. MST의 특징

- 간선 **가중치의 합**이 최소여야 함
- **n개의 정점**에 대해 **(n-1)개의 간선**만 사용
- **사이클이 포함되지 않음**

<br>

### 3. MST의 활용

- **도로 건설**: 도시들을 연결하면서 도로 길이 최소화
- **전기 회로**: 단자들을 연결하면서 전선 길이 최소화
- **통신망**: 전화 케이블 망 구성 시 길이 최소화
- **배관**: 파이프를 연결하면서 총 길이 최소화

<br>

### 4. Prim 알고리즘

**시작 정점**에서 출발하여 **신장 트리 집합**을 단계적으로 확장하는 방법. **정점 선택** 기반 알고리즘이다.

<br>

**동작 과정**

<img src="image2.png" width="100%">

1. 시작 정점만 **MST 집합**에 포함
2. MST 집합에 **인접한 정점들** 중 **최소 간선**으로 연결된 정점 선택
3. **(n-1)개의 간선**을 가질 때까지 반복

<br>

**특징**

- 이전 단계에서 만들어진 **신장 트리를 확장**하는 방식
- 매 단계마다 **가장 낮은 가중치**의 간선 선택

<br>

### 5. Kruskal 알고리즘

**탐욕적 방법**을 이용하여 **모든 정점**을 최소 비용으로 연결하는 알고리즘. **간선 선택** 기반 알고리즘이다.

<br>

**동작 과정**

<img src="image3.png" width="100%">

1. 간선들을 **가중치 오름차순**으로 정렬
2. 정렬된 순서대로 **사이클을 형성하지 않는 간선** 선택
3. 선택된 간선을 **MST 집합**에 추가
4. **(n-1)개의 간선**을 선택할 때까지 반복

<br>

**특징**

- 이전 신장 트리와 **무관하게 최소 간선만 선택**
- **Union-Find** 연산으로 사이클 여부 판단
- 최적 해답이 보장됨

<br>

### 6. Union-Find 연산

간선 추가 시 **사이클 형성 여부**를 판단하기 위한 연산. 두 정점이 **같은 집합에 속하는지** 검사한다.

<br>

**Find 연산**

원소가 속한 집합의 **대표 원소**를 찾는다.

<br>

**Union 연산**

두 집합의 **합집합**을 만든다.

```python
# 초기화
parent = [i for i in range(n)]

# Find: 경로 압축 최적화
def find(x):
    if parent[x] == x:
        return x
    parent[x] = find(parent[x])
    return parent[x]

# Union
def union(x, y):
    x = find(x)
    y = find(y)
    parent[y] = x
```

<br>

**예시**

```
초기: {1}, {2}, {3}, {4}
Union(1, 4), Union(2, 3) 수행 후
결과: {1, 4}, {2, 3}
```

<br>

### 7. Kruskal 시간 복잡도

**Union-Find** 연산을 활용하면 간선 정렬 시간에 의해 결정된다.

- 간선 **E개**를 퀵 정렬로 정렬: **O(E log E)**
- 전체 시간 복잡도: **O(E log E)**

<br>

### 8. Prim vs Kruskal 비교

| **구분** | **Prim** | **Kruskal** |
| --- | --- | --- |
| **선택 기준** | 정점 | 간선 |
| **확장 방식** | 이전 트리 확장 | 간선 독립 선택 |
| **필요 연산** | 우선순위 큐 | Union-Find |
| **시간 복잡도** | O(E log V) | O(E log E) |